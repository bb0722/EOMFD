
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ìè≠ÏïΩ ÎåÄÌîºÍ±∞Î¶¨ Í≥ÑÏÇ∞Í∏∞</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    label { display: block; margin-top: 10px; }
    input, select, button { margin-top: 5px; }
    .result { margin-top: 20px; font-weight: bold; white-space: pre-line; }
    #map { height: 400px; width: 100%; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>üí£ Ìè≠ÏïΩ ÎåÄÌîºÍ±∞Î¶¨ Í≥ÑÏÇ∞Í∏∞</h1>

  <label>Ìè≠ÏïΩ Ï¢ÖÎ•ò:
    <select id="explosiveType" onchange="toggleInputs()">
      <option value="TNT">TNT (kg)</option>
      <option value="C4">C4 (lb)</option>
      <option value="DetCord">ÎèÑÌè≠ÏÑ† (cm)</option>
    </select>
  </label>

  <div id="tntInput">
    <label>TNT Î¨¥Í≤å (kg): <input type="number" id="tntWeight" step="0.01" /></label>
  </div>

  <div id="c4Input" style="display:none;">
    <label>C4 Î¨¥Í≤å (lb): <input type="number" id="c4Weight" step="0.01" /></label>
  </div>

  <div id="detcordInput" style="display:none;">
    <label>ÎèÑÌè≠ÏÑ† Í∏∏Ïù¥ (cm): <input type="number" id="detCordLength" step="0.1" /></label>
  </div>

  <label>ÎáåÍ¥Ä Í∞úÏàò:
    <input type="number" id="blastingCaps" step="1" value="0" />
  </label>

  <label>K ÏÉÅÏàòÍ∞í:
    <select id="kValue">
      <option value="18">K18</option>
      <option value="24">K24</option>
      <option value="50">K50</option>
      <option value="328">K328</option>
    </select>
  </label>

  <button onclick="calculate()">Í≥ÑÏÇ∞ÌïòÍ∏∞</button>

  <div class="result" id="result"></div>
  <div id="map"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
  <script>
    let map;
    let circle;

    window.onload = function () {
      map = L.map('map').setView([37.5665, 126.9780], 15);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '¬© OpenStreetMap contributors'
      }).addTo(map);
    };

    function toggleInputs() {
      const type = document.getElementById("explosiveType").value;
      document.getElementById("tntInput").style.display = type === "TNT" ? "block" : "none";
      document.getElementById("c4Input").style.display = type === "C4" ? "block" : "none";
      document.getElementById("detcordInput").style.display = type === "DetCord" ? "block" : "none";
    }

    function calculate() {
      const type = document.getElementById("explosiveType").value;
      const k = parseFloat(document.getElementById("kValue").value);
      const caps = parseInt(document.getElementById("blastingCaps").value) || 0;

      let totalWeightLb = 0;

      if (type === "TNT") {
        const kg = parseFloat(document.getElementById("tntWeight").value) || 0;
        totalWeightLb = kg / 1.34 / 0.454;
      }

      if (type === "C4") {
        const c4Lb = parseFloat(document.getElementById("c4Weight").value) || 0;
        totalWeightLb = c4Lb * 1.34;
      }

      if (type === "DetCord") {
        const lengthCm = parseFloat(document.getElementById("detCordLength").value) || 0;
        const detcordLb = (lengthCm * 1.64 * 1.66) / 7000;
        totalWeightLb = detcordLb;
      }

      const capLb = caps * ((13.5 * 1.60) / 7000);
      totalWeightLb += capLb;

      const distance = k * Math.cbrt(totalWeightLb);

      document.getElementById("result").innerText =
        `Ï¥ù TNT ÌôòÏÇ∞Ï§ëÎüâ: ${totalWeightLb.toFixed(3)} lb\n` +
        `ÏïàÏ†ÑÍ±∞Î¶¨(K${k}): ${distance.toFixed(2)} m`;

      if (circle) map.removeLayer(circle);
      circle = L.circle([37.5665, 126.9780], {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.3,
        radius: distance
      }).addTo(map);
    }
  </script>
</body>
</html>
