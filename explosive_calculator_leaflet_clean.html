
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>í­ì•½ ëŒ€í”¼ê±°ë¦¬ ê³„ì‚°ê¸°</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    label { display: block; margin-top: 10px; }
    input, select, button { margin-top: 5px; }
    .result { margin-top: 20px; font-weight: bold; white-space: pre-line; }
    #map { height: 400px; width: 100%; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>ğŸ’£ í­ì•½ ëŒ€í”¼ê±°ë¦¬ ê³„ì‚°ê¸°</h1>

  <label>í­ì•½ ì¢…ë¥˜:
    <select id="explosiveType" onchange="toggleInputs()">
      <option value="TNT">TNT (kg)</option>
      <option value="C4">C4 (lb)</option>
      <option value="DetCord">ë„í­ì„  (cm)</option>
    </select>
  </label>

  <div id="tntInput">
    <label>TNT ë¬´ê²Œ (kg): <input type="number" id="tntWeight" step="0.01" /></label>
  </div>

  <div id="c4Input" style="display:none;">
    <label>C4 ë¬´ê²Œ (lb): <input type="number" id="c4Weight" step="0.01" /></label>
  </div>

  <div id="detcordInput" style="display:none;">
    <label>ë„í­ì„  ê¸¸ì´ (cm): <input type="number" id="detCordLength" step="0.1" /></label>
  </div>

  <label>ë‡Œê´€ ê°œìˆ˜:
    <input type="number" id="blastingCaps" step="1" value="0" />
  </label>

  <label>K ìƒìˆ˜ê°’:
    <select id="kValue">
      <option value="18">K18</option>
      <option value="24">K24</option>
      <option value="50">K50</option>
      <option value="328">K328</option>
    </select>
  </label>

  <button onclick="calculate()">ê³„ì‚°í•˜ê¸°</button>

  <div class="result" id="result"></div>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    let map = L.map('map').setView([37.5665, 126.9780], 15); // ì„œìš¸ ê¸°ë³¸ ì¢Œí‘œ
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
    }).addTo(map);

    let circle;

    function toggleInputs() {
      const type = document.getElementById("explosiveType").value;
      document.getElementById("tntInput").style.display = type === "TNT" ? "block" : "none";
      document.getElementById("c4Input").style.display = type === "C4" ? "block" : "none";
      document.getElementById("detcordInput").style.display = type === "DetCord" ? "block" : "none";
    }

    function calculate() {
      const type = document.getElementById("explosiveType").value;
      const k = parseFloat(document.getElementById("kValue").value);
      const caps = parseInt(document.getElementById("blastingCaps").value) || 0;

      let totalWeightLb = 0;

      if (type === "TNT") {
        const kg = parseFloat(document.getElementById("tntWeight").value) || 0;
        totalWeightLb = kg / 1.34 / 0.454;
      }

      if (type === "C4") {
        const c4Lb = parseFloat(document.getElementById("c4Weight").value) || 0;
        totalWeightLb = c4Lb * 1.34;
      }

      if (type === "DetCord") {
        const lengthCm = parseFloat(document.getElementById("detCordLength").value) || 0;
        const detcordLb = (lengthCm * 1.64 * 1.66) / 7000;
        totalWeightLb = detcordLb;
      }

      const capLb = caps * ((13.5 * 1.60) / 7000);
      totalWeightLb += capLb;

      const distance = k * Math.cbrt(totalWeightLb);

      document.getElementById("result").innerText =
        `ì´ TNT í™˜ì‚°ì¤‘ëŸ‰: ${totalWeightLb.toFixed(3)} lb\n` +
        `ì•ˆì „ê±°ë¦¬(K${k}): ${distance.toFixed(2)} m`;

      if (circle) map.removeLayer(circle);
      circle = L.circle([37.5665, 126.9780], {
        color: 'red',
        fillColor: '#f03',
        fillOpacity: 0.3,
        radius: distance
      }).addTo(map);
    }
  </script>
</body>
</html>
